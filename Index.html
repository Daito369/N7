<!DOCTYPE html>
<html lang="ja" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NexusHub v6</title>
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACyUlEQVR4nO2Za2vUQBSG+1MU/KJ4Qc0m2V0r1WKV1mKlKCoURUVRCipKoSiKFYqiohS2dnvbXu3eL/2DxwQaqcsm805K8oKdD++33ZnzPExmzjB9R44ek8OcPnYB7BgB7ALYMQLYBbBjBLALYMcIYBfAjhHALoAdI4BdADtGALsAdmILyBd2JD+/Jbn5Dcn9KnlZkdzCouSKC5ItFiS7OOfl54ELzGw99vJQMtv3xdqeEOv3PS93xNq5JVZ5XJzyTcmVxwgCAPjs0ndxl74eUIAavr98I30BKLy7/NnLbHwBAPxAZZQgQAPeXfkUu0AEfrBynSEAh3dXP4qz+j6eAAB+qDJCEKAJ75TexhSghh+uDhMEaMI7pWlx1qb0BQDwo9Vr6QvQWfYBvL32Ruz1V3oCAPix6lWCAM1lH8Db6y+05kHgx2tDDAHYsv8rYA/e3pgUe/M5PA8Cf7t2hSAgxjcfwGc2n8LzIPB3a4PpC0Dg/WX/j4A9+KC9ReZB4CfqlwkCAPheG153b6+aB4F/UL/EEKCGD9vw9re3qnkQ+Ef1AYIAAN7/5nv9t7u9jZoHgX/SuEgQAMBH7fbdHV7Y7xD4Z43+9AUg8FG7PXqfR+AnGxcIAgB4f8OLHAO40iLwL5t5hgA1PHLUqa60CPzrZpYgAID3d3vVOKpbHQI/1XTTF4DAI+e8n6iLDQI/3XQIAgB45JwPEnaxQeDftWyGADW8f9Sh44X19gj8h5ZFEADAq5qc7vTq7RH4mdZ5ggAA3j/ndcbs1d4i8LPtc+kLQOCjOrywoN/8fvgv7bMEAQm+2OjCf2ufYQhI7sVGF/5H5zRBQMIvNjrwc51T6QtI+sVGB77QOUkQkPCLjR8Uvrh7giEg2RebIAj88u7x9AX8LzEC2AWwYwSwC2DHCGAXwI4RwC6AHSOAXQA7RgC7AHaMAHYB7Bx6AX8AbYDV9k/vnXwAAAAASUVORK5CYII=">
  <link rel="stylesheet" href="styles/tokens.css">
  <link rel="stylesheet" href="styles/app.css">
  <link rel="stylesheet" href="styles/mail.css">
  <link rel="stylesheet" href="styles/chat.css">
  <link rel="stylesheet" href="styles/calendar.css">
  <link rel="stylesheet" href="styles/todo.css">
  <link rel="stylesheet" href="styles/link-folders.css">
  <link rel="stylesheet" href="styles/modal.css">
</head>
<body>
  <main class="main-shell" role="main">
    <header class="app-header" aria-label="NexusHub v6 ヘッダー">
      <div class="app-header__identity">
        <div class="app-header__logo" aria-hidden="true">NH</div>
        <div class="app-header__title">
          <h1>NexusHub v6</h1>
          <span>統合ワークスペースポータル</span>
        </div>
      </div>
      <div class="app-header__actions">
        <button class="md-icon-button" id="themeToggle" type="button" aria-pressed="false" aria-label="テーマ切替">
          <span class="material-symbols-rounded" aria-hidden="true">light_mode</span>
        </button>
        <button class="md-icon-button" id="openTimer" type="button" aria-label="タイマーを開く">
          <span class="material-symbols-rounded" aria-hidden="true">timer</span>
        </button>
      </div>
    </header>

    <section class="surface-card" aria-labelledby="mailSection">
      <div class="mail-section__header">
        <h2 id="mailSection">未読メール</h2>
        <span class="badge" id="mailBadge" aria-live="polite">0</span>
      </div>
      <div id="mailList" class="mail-grid" role="list" aria-label="未読メール一覧"></div>
      <div id="mailEmptyState" class="empty-state" hidden>未読メールはありません。</div>
    </section>

    <section class="surface-card chat-section" aria-labelledby="chatSection">
      <div class="chat-toolbar">
        <h2 id="chatSection">未読チャット</h2>
        <div class="chat-search">
          <label for="chatSearch" class="visually-hidden">チャットを検索</label>
          <input type="search" id="chatSearch" placeholder="タイトル・メッセージ・発言者を検索" aria-label="チャット検索">
          <span class="material-symbols-rounded" aria-hidden="true">search</span>
        </div>
        <div class="chat-filters" role="group" aria-label="チャット種別フィルター">
          <button type="button" data-filter="unread" aria-pressed="true">未読のみ</button>
          <button type="button" data-filter="dm" aria-pressed="false">DM</button>
          <button type="button" data-filter="spaces" aria-pressed="false">スペース</button>
        </div>
      </div>
      <div class="chat-columns" id="chatColumns" data-mode="columns" role="region" aria-live="polite">
        <div class="chat-column" data-type="dm" aria-label="DM">
          <div class="chat-column__title">DM</div>
          <div class="chat-list" id="chatDmList" role="list"></div>
        </div>
        <div class="chat-column" data-type="spaces" aria-label="スペース">
          <div class="chat-column__title">スペース</div>
          <div class="chat-list" id="chatSpacesList" role="list"></div>
        </div>
      </div>
      <div id="chatEmptyState" class="empty-state" hidden>未読チャットはありません。</div>
    </section>

    <section class="surface-card calendar-section" aria-labelledby="calendarSection">
      <div class="calendar-toolbar">
        <h2 id="calendarSection">カレンダー</h2>
        <div class="calendar-toolbar__controls">
          <button type="button" data-view="month" aria-pressed="true">月表示</button>
          <button type="button" data-view="week" aria-pressed="false">週表示</button>
        </div>
      </div>
      <div class="calendar-grid" id="calendarGrid" data-view="month" aria-live="polite"></div>
    </section>

    <section class="surface-card" aria-labelledby="todoSection">
      <div class="todo-section__header">
        <h2 id="todoSection">Todo</h2>
        <button class="md-icon-button" type="button" id="createTodo" aria-label="新規タスクを追加">
          <span class="material-symbols-rounded" aria-hidden="true">add</span>
        </button>
      </div>
      <div class="todo-grid" id="todoList" role="list"></div>
      <div id="todoEmptyState" class="empty-state" hidden>未完了のタスクはありません。</div>
    </section>

    <section class="surface-card" aria-labelledby="linksSection">
      <div class="todo-section__header">
        <h2 id="linksSection">リンクフォルダ</h2>
        <button class="md-icon-button" type="button" id="manageFolders" aria-label="フォルダ管理モーダルを開く">
          <span class="material-symbols-rounded" aria-hidden="true">more_vert</span>
        </button>
      </div>
      <div class="link-folders" id="linkFolderList" role="tree"></div>
      <div id="linkEmptyState" class="empty-state" hidden>リンクが登録されていません。</div>
    </section>
  </main>

  <div class="dialog-backdrop" id="modalBackdrop" role="presentation" aria-hidden="true">
    <div class="dialog-surface" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header>
        <h2 id="modalTitle">モーダル</h2>
        <button class="md-icon-button" type="button" data-modal-close aria-label="モーダルを閉じる">
          <span class="material-symbols-rounded" aria-hidden="true">close</span>
        </button>
      </header>
      <div id="modalContent"></div>
    </div>
  </div>

  <template id="emailCardTemplate">
    <article class="mail-card" role="listitem" tabindex="0">
      <div class="mail-card__actions">
        <button class="md-icon-button" type="button" data-action="open" aria-label="メールを開く">
          <span class="material-symbols-rounded" aria-hidden="true">open_in_new</span>
        </button>
        <button class="md-icon-button" type="button" data-action="archive" aria-label="アーカイブ">
          <span class="material-symbols-rounded" aria-hidden="true">archive</span>
        </button>
        <button class="md-icon-button" type="button" data-action="markRead" aria-label="既読にする">
          <span class="material-symbols-rounded" aria-hidden="true">done</span>
        </button>
      </div>
      <div class="mail-card__sender">
        <span class="material-symbols-rounded" aria-hidden="true">person</span>
        <span data-field="from"></span>
      </div>
      <div class="mail-card__subject" data-field="subject"></div>
      <div class="mail-card__snippet" data-field="snippet"></div>
      <div class="mail-card__meta">
        <span class="mail-card__chip" data-field="messageCount"></span>
        <time data-field="date"></time>
      </div>
    </article>
  </template>

  <template id="chatItemTemplate">
    <div class="chat-item" role="listitem" tabindex="0">
      <span class="chat-item__badge" data-field="unread"></span>
      <div class="chat-item__info">
        <div class="chat-item__title" data-field="title"></div>
        <div class="chat-item__snippet" data-field="snippet"></div>
      </div>
      <div class="chat-item__actions">
        <button class="md-icon-button" type="button" data-action="open" aria-label="チャットを開く">
          <span class="material-symbols-rounded" aria-hidden="true">open_in_new</span>
        </button>
        <button class="md-icon-button" type="button" data-action="markRead" aria-label="既読にする">
          <span class="material-symbols-rounded" aria-hidden="true">done</span>
        </button>
      </div>
    </div>
  </template>

  <template id="todoCardTemplate">
    <article class="todo-card" role="listitem" data-completed="false" tabindex="0">
      <div class="todo-card__actions">
        <button class="md-icon-button" type="button" data-action="edit" aria-label="タスクを編集">
          <span class="material-symbols-rounded" aria-hidden="true">edit</span>
        </button>
        <button class="md-icon-button" type="button" data-action="delete" aria-label="タスクを削除">
          <span class="material-symbols-rounded" aria-hidden="true">delete</span>
        </button>
      </div>
      <label class="todo-card__title">
        <input type="checkbox" data-action="toggleComplete" aria-label="タスク完了">
        <span data-field="title"></span>
      </label>
      <div class="todo-card__meta">
        <span class="material-symbols-rounded" aria-hidden="true">event</span>
        <time data-field="due"></time>
      </div>
      <div class="todo-card__meta">
        <span class="material-symbols-rounded" aria-hidden="true">folder</span>
        <span data-field="listName"></span>
      </div>
      <p class="todo-card__notes" data-field="note"></p>
    </article>
  </template>

  <template id="linkFolderTemplate">
    <div class="link-folder" data-collapsed="false" role="treeitem" aria-expanded="true">
      <div class="link-folder__header" role="button" tabindex="0">
        <div class="link-folder__title">
          <span class="link-folder__indicator" data-field="color" aria-hidden="true"></span>
          <span data-field="name"></span>
        </div>
        <div class="link-folder__menu">
          <button class="md-icon-button" type="button" data-action="newLink" aria-label="リンクを追加">
            <span class="material-symbols-rounded" aria-hidden="true">add_link</span>
          </button>
          <button class="md-icon-button" type="button" data-action="menu" aria-label="フォルダメニュー">
            <span class="material-symbols-rounded" aria-hidden="true">more_vert</span>
          </button>
        </div>
      </div>
      <div class="link-folder__list" role="group"></div>
    </div>
  </template>

  <template id="linkItemTemplate">
    <div class="link-item" draggable="true" role="treeitem" tabindex="0">
      <a href="#" data-field="title" target="_blank" rel="noopener"></a>
      <div class="link-item__actions">
        <button class="md-icon-button" type="button" data-action="open" aria-label="リンクを開く">
          <span class="material-symbols-rounded" aria-hidden="true">open_in_new</span>
        </button>
        <button class="md-icon-button" type="button" data-action="remove" aria-label="リンクを削除">
          <span class="material-symbols-rounded" aria-hidden="true">delete</span>
        </button>
      </div>
    </div>
  </template>

  <dialog id="calendarModal" class="calendar-modal" aria-modal="true" aria-labelledby="calendarModalTitle">
    <article class="dialog-surface">
      <header>
        <h2 id="calendarModalTitle">予定</h2>
        <button class="md-icon-button" type="button" data-calendar-close aria-label="予定カードを閉じる">
          <span class="material-symbols-rounded" aria-hidden="true">close</span>
        </button>
      </header>
      <div class="calendar-event-list" id="calendarEventList"></div>
    </article>
  </dialog>

  <script src="https://fonts.googleapis.com/icon?family=Material+Icons" async></script>
  <script src="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:wght@300;400;500;600;700&display=swap" async></script>
  <script type="module" src="scripts/app.js" defer></script>
</body>
</html>
